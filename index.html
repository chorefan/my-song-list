<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHORE SONG ğŸ¤</title>
<style>
  :root { --primary: #4CAF50; --accent: #e91e63; --bg: #f0f2f5; }
  body { font-family: sans-serif; line-height: 1.6; padding: 20px; max-width: 900px; margin: auto; background-color: var(--bg); color: #333; }
  section { background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 30px; }
  h1, h2 { border-bottom: 3px solid var(--primary); padding-bottom: 10px; }
  
  .btn { border: none; padding: 12px 24px; border-radius: 30px; cursor: pointer; font-weight: bold; transition: 0.3s; font-size: 1rem; display: inline-block; text-decoration: none; }
  .btn-main { background: var(--primary); color: white; }
  .btn-copy { background: #eee; color: #333; padding: 5px 15px; font-size: 0.8rem; border-radius: 5px; }
  .btn:hover { opacity: 0.8; transform: scale(1.05); }

  /* --- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã®ã‚¹ã‚¿ã‚¤ãƒ« --- */
  #toast {
    visibility: hidden;
    min-width: 200px;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 50px;
    padding: 12px;
    position: fixed;
    z-index: 2000;
    left: 50%;
    bottom: 30px;
    transform: translateX(-50%);
    font-size: 0.9rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }
  #toast.show {
    visibility: visible;
    animation: fadein 0.5s, fadeout 0.5s 1.5s;
  }
  @keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
  @keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }

  /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
  #amida-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; }
  .modal-content { background: white; padding: 20px; border-radius: 15px; width: 90%; max-width: 800px; position: relative; text-align: center; }
  .close-btn { position: absolute; top: 10px; right: 20px; font-size: 2rem; cursor: pointer; color: #666; }
  canvas { background: #fff; width: 100%; height: auto; border: 1px solid #eee; }
  
  .search-box { display: flex; gap: 10px; margin-bottom: 20px; }
  input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; }
  table { width: 100%; border-collapse: collapse; }
  th, td { border-bottom: 1px solid #eee; padding: 15px; text-align: left; }
  
  .pickup-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-top: 10px; }
  .pickup-card { 
    background: #e8f5e9; 
    padding: 12px 15px; 
    border-radius: 8px; 
    border-left: 5px solid var(--primary); 
    font-size: 0.95rem; 
    cursor: pointer; 
    transition: 0.2s;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .pickup-card:hover { background: #dceddc; transform: translateY(-2px); }
  .pickup-card small { color: #666; display: block; margin-top: 4px; }
  .copy-icon { font-size: 0.8rem; opacity: 0.5; margin-left: 5px; }
</style>
</head>
<body>

<h1>ğŸ˜»ğŸ‘™ My Song ğŸ¼CHOREğŸ§</h1>

<div id="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</div>

<section id="profile">
  <p>ä»Šæ—¥ã®é‹æ›²ã¯ã„ã‹ã«ï¼ï¼Ÿ</p>
  <button class="btn btn-main" onclick="openAmida()">ğŸ² é‹æ›²ã‚ã¿ã ãã˜</button>
</section>

<section id="pickup">
  <h2>ğŸŒŸ å¾—æ„æ›² </h2>
  <div class="pickup-grid" id="pickupList"></div>
</section>

<div id="amida-modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeAmida()">&times;</span>
    <h3>é‹æ›²ã‚ã¿ã ãã˜</h3>
    <canvas id="amida-stage" width="800" height="400"></canvas>
    <div id="result-area" style="margin-top: 15px; min-height: 80px;">
      <div id="result-text" style="font-size: 1.4rem; font-weight: bold; color: var(--accent);"></div>
      <div id="action-btns" style="display: none; gap: 10px; justify-content: center; margin-top: 10px;">
        <button class="btn btn-main" onclick="startAmida()">ã‚‚ã†ä¸€å›ï¼</button>
        <button id="copyBtn" class="btn btn-copy" onclick="copyResult()">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
      </div>
    </div>
  </div>
</div>

<section id="list">
  <h2>ğŸ” æ›²ãƒªã‚¹ãƒˆ (<span id="songCount">0</span>æ›²)</h2>
  <div class="search-box">
    <input id="songSearch" placeholder="æ›²/æ­Œæ‰‹æ¤œç´¢" oninput="filterList()">
  </div>
  <table id="songTable"></table>
</section>

<script>
// --- æ›²ãƒ‡ãƒ¼ã‚¿ (ä¸€éƒ¨æŠœç²‹è¡¨ç¤ºã§ã™ãŒå…¨ãƒ‡ãƒ¼ã‚¿å…¥ã‚Œã¦ãã ã•ã„) ---
const songs = [
  {title:"ãƒãƒªãƒ¼ã‚´ãƒ¼ãƒ«ãƒ‰", artist:"ã‚ã„ã¿ã‚‡ã‚“"},
  {title:"å›ã¯ãƒ­ãƒƒã‚¯ã‚’è´ã‹ãªã„", artist:"ã‚ã„ã¿ã‚‡ã‚“"},
  {title:"è²´æ–¹è§£å‰–ç´”æ„›æ­Œ", artist:"ã‚ã„ã¿ã‚‡ã‚“"},
  {title:"ãƒãƒ¼ãƒˆ", artist:"ã‚ã„ã¿ã‚‡ã‚“"},
  {title:"è£¸ã®å¿ƒ", artist:"ã‚ã„ã¿ã‚‡ã‚“"},
  {title:"3636", artist:"ã‚ã„ã¿ã‚‡ã‚“"},
  {title:"æ¡œãŒé™ã‚‹å¤œã¯", artist:"ã‚ã„ã¿ã‚‡ã‚“"},
  {title:"10æœˆç„¡å£ãªå›ã‚’å¿˜ã‚Œã‚‹", artist:"ã‚ãŸã‚‰ã‚ˆ"},
  {title:"8.8", artist:"ã‚ãŸã‚‰ã‚ˆ"},
  {title:"å˜˜ã¤ã", artist:"ã‚ãŸã‚‰ã‚ˆ"},
  {title:"å¤éœ", artist:"ã‚ãŸã‚‰ã‚ˆ"},
  {title:"è²´æ–¹ã®æ‹äººã«ãªã‚ŠãŸã„ã®ã§ã™", artist:"é˜¿éƒ¨çœŸå¤®"},
  {title:"I wanna see you", artist:"é˜¿éƒ¨çœŸå¤®"},
  {title:"è™¹", artist:"äºŒå®®å’Œä¹Ÿ"},
  {title:"å›ãŒãã‚ŒãŸå¤", artist:"å®¶å…¥ãƒ¬ã‚ª"},
  {title:"Shine", artist:"å®¶å…¥ãƒ¬ã‚ª"},
  {title:"æœªå®Œæˆ", artist:"å®¶å…¥ãƒ¬ã‚ª"},
  {title:"å¤ªé™½ã®å¥³ç¥", artist:"å®¶å…¥ãƒ¬ã‚ª"},
  {title:"é¢¨ãŒå¹ã„ã¦ã„ã‚‹", artist:"ã„ãã‚‚ã®ãŒã‹ã‚Š"},
  {title:"ã‚³ã‚¤ã‚¹ãƒ«ã‚ªãƒˆãƒ¡", artist:"ã„ãã‚‚ã®ãŒã‹ã‚Š"},
  {title:"ã‚ã‚ŠãŒã¨ã†", artist:"ã„ãã‚‚ã®ãŒã‹ã‚Š"},
  {title:"YELL", artist:"ã„ãã‚‚ã®ãŒã‹ã‚Š"},
  {title:"ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ«", artist:"å¹¾ç”°ã‚Šã‚‰"},
  {title:"answer", artist:"å¹¾ç”°ã‚Šã‚‰"},
  {title:"FirstLove", artist:"å®‡å¤šç”°ãƒ’ã‚«ãƒ«"},
  {title:"ã‚»ãƒ³ãƒãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»ã‚­ã‚¹", artist:"æ±ã‚Œã„ã‚‰"},
  {title:"Darling You", artist:"æ±ã‚Œã„ã‚‰"},
  {title:"ã¡ã£ã½ã‘ãªæ„›ã®ã†ãŸ", artist:"å¤§åŸæ«»å­", isSpecial:true},
  {title:"ç³", artist:"å¤§åŸæ«»å­"},
  {title:"å¤‰ã‚ã‚‰ãªã„ã‚‚ã®", artist:"å¥¥è¯å­"},
  {title:"ã‚¬ãƒ¼ãƒãƒƒãƒˆ", artist:"å¥¥è¯å­"},
  {title:"ã‚‚ã—ã‚‚", artist:"ã‚«ãƒãƒ¨ãƒªãƒã‚µãƒ«"},
  {title:"ã²ã‚‰ã‚Šã¨ãƒ‘ãƒ¼ã‚­ãƒ¼", artist:"ã‚«ãƒãƒ¨ãƒªãƒã‚µãƒ«"},
  {title:"å›ã«ã•ã‚ˆãªã‚‰", artist:"ã‚«ãƒãƒ¨ãƒªãƒã‚µãƒ«"},
  {title:"ã‚¢ãƒ³ãƒãƒ¼", artist:"ã‹ã‚Šã‚†ã—58"},
  {title:"é­”æ³•ã®çµ¨æ¯¯", artist:"å·å´é·¹ä¹Ÿ"},
  {title:"å›ã®ç‚ºã®ã‚­ãƒŸãƒã‚¦ã‚¿", artist:"å·å´é·¹ä¹Ÿ"},
  {title:"ãƒ©ãƒ—ã‚¹", artist:"ãã®ã“å¸å›½"},
  {title:"é‡‘æœ¨çŠ€ã®å¤œ", artist:"ãã®ã“å¸å›½"},
  {title:"çŒ«ã¨ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼", artist:"ãã®ã“å¸å›½"},
  {title:"æ€ªç£ã®è…•ã®ä¸­", artist:"ãã®ã“å¸å›½"},
  {title:"æ¡œãŒå’²ãå‰ã«", artist:"ãã®ã“å¸å›½"},
  {title:"æ±äº¬", artist:"ãã®ã“å¸å›½"},
  {title:"ã‚¯ãƒ­ãƒã‚¹ã‚¿ã‚·ã‚¹", artist:"ãã®ã“å¸å›½"},
  {title:"æ ", artist:"ã‚¯ãƒªãƒ¼ãƒ—ãƒã‚¤ãƒ—"},
  {title:"exãƒ€ãƒ¼ãƒªãƒ³", artist:"ã‚¯ãƒªãƒ¼ãƒ—ãƒã‚¤ãƒ—"},
  {title:"ãƒãƒ³ãƒ‰", artist:"ã‚¯ãƒªãƒ¼ãƒ—ãƒã‚¤ãƒ—"},
  {title:"ãŠã‚„ã™ã¿æ³£ãå£°ã€ã•ã‚ˆãªã‚‰æ­Œå§«", artist:"ã‚¯ãƒªãƒ¼ãƒ—ãƒã‚¤ãƒ—"},
  {title:"æœ¬å½“ãªã‚“ã¦ã¶ã£é£›ã°ã—ã¦ã‚ˆ", artist:"ã‚¯ãƒªãƒ¼ãƒ—ãƒã‚¤ãƒ—"},
  {title:"å¹½éœŠå¤±æ ¼", artist:"ã‚¯ãƒªãƒ¼ãƒ—ãƒã‚¤ãƒ—"},
  {title:"æ˜Ÿåº§ã«ãªã‚ŒãŸã‚‰", artist:"çµæŸãƒãƒ³ãƒ‰", isSpecial:true},
  {title:"ãŸã°ã“", artist:"ã‚³ãƒ¬ã‚µãƒ¯"},
  {title:"æ‹äººå¤±æ ¼", artist:"ã‚³ãƒ¬ã‚µãƒ¯"},
  {title:"æ„›ã‚†ãˆã«", artist:"ã•ã¨ã†ã‚‚ã‹"},
  {title:"melt bitter", artist:"ã•ã¨ã†ã‚‚ã‹"},
  {title:"ä¸–ç•Œã®ç§˜å¯†", artist:"ã•ãƒ¦ã‚Š"},
  {title:"å…‰ã¨é—‡", artist:"ã•ãƒ¦ã‚Š"},
  {title:"ãƒ•ãƒ©ãƒ¬ã‚¬ã‚¤ã‚¬ãƒ¼ãƒ«", artist:"ã•ãƒ¦ã‚Š", isSpecial:true},
  {title:"å¹³è¡Œç·š", artist:"ã•ãƒ¦ã‚Š"},
  {title:"ãƒŸã‚«ãƒ…ã‚­", artist:"ã•ãƒ¦ã‚Š"},
  {title:"åå„„å¹´", artist:"ã•ãƒ¦ã‚Š"},
  {title:"birthdaysong", artist:"ã•ãƒ¦ã‚Š"},
  {title:"ä¸¸ã®å†…ã‚µãƒ‡ã‚£ã‚¹ãƒ†ã‚£ãƒƒã‚¯", artist:"æ¤åæ—æª"},
  {title:"ã‚¢ãƒªã‚¨ãƒƒãƒ†ã‚£ã‚½ãƒ³ã‚°", artist:"ã‚¸ãƒ–ãƒª"},
  {title:"é¢¨ã«ãªã‚‹", artist:"ã‚¸ãƒ–ãƒª"},
  {title:"ã„ã¤ã‚‚ä½•åº¦ã§ã‚‚", artist:"ã‚¸ãƒ–ãƒª"},
  {title:"ã•ã‚ˆãªã‚‰ã®å¤", artist:"ã‚¸ãƒ–ãƒª"},
  {title:"ãƒ†ãƒ«ãƒ¼ã®å”„", artist:"ã‚¸ãƒ–ãƒª"},
  {title:"æ­£ã—ããªã‚Œãªã„", artist:"ãšã£ã¨çœŸå¤œä¸­ã§ã„ã„ã®ã«ã€‚"},
  {title:"ç§’é‡ã‚’å™›ã‚€", artist:"ãšã£ã¨çœŸå¤œä¸­ã§ã„ã„ã®ã«ã€‚"},
  {title:"åœ°ç„å…ˆç”Ÿ", artist:"ç›¸å¯¾æ€§ç†è«–"},
  {title:"ãŠã¯ã‚ˆã†ã‚ªãƒ¼ãƒ‘ãƒ¼ãƒ„", artist:"ç›¸å¯¾æ€§ç†è«–"},
  {title:"ç™¾å¹´æˆ¦äº‰", artist:"ç›¸å¯¾æ€§ç†è«–"},
  {title:"æ°—ã«ãªã‚‹ã‚ã®å¨˜", artist:"ç›¸å¯¾æ€§ç†è«–"},
  {title:"ä¸–ç•ŒãŒçµ‚ã‚ã‚‹å¤œã«", artist:"ãƒãƒ£ãƒƒãƒˆãƒ¢ãƒ³ãƒãƒ¼"},
  {title:"æŸ“ã¾ã‚‹ã‚ˆ", artist:"ãƒãƒ£ãƒƒãƒˆãƒ¢ãƒ³ãƒãƒ¼"},
  {title:"Never glow up", artist:"ã¡ã‚ƒã‚“ã¿ãª"},
  {title:"ãƒãƒ¬ãƒ³ãƒ", artist:"ã¡ã‚ƒã‚“ã¿ãª"},
  {title:"æ˜æ—¥ã¸ã®æ‰‹ç´™", artist:"æ‰‹å¶Œè‘µ"},
  {title:"ç´¡ã", artist:"ã¨ãŸ"},
  {title:"å³æ‰‹ã®ãƒã‚¤ãƒ«", artist:"ã¨ãŸ"},
  {title:"æ¶™ãã†ãã†", artist:"å¤å·ã‚Šã¿"},
  {title:"å³¶å”„", artist:"å¤å·ã‚Šã¿"},
  {title:"ãƒ¯ãƒ³ãƒ«ãƒ¼ãƒ ", artist:"ã«ã—ãª", isSpecial:true},
  {title:"ãƒ˜ãƒ“ãƒ¼ã‚¹ãƒ¢ãƒ¼ã‚¯", artist:"ã«ã—ãª", isSpecial:true},
  {title:"é’è—éŠæ³³", artist:"ã«ã—ãª"},
  {title:"æ—¥å¸¸é©å‘½", artist:"ã­ãã›"},
  {title:"ã²ã¾ã‚ã‚Šã®ç´„æŸ", artist:"ç§¦åŸºåš"},
  {title:"æ‹æ„›ã‚µãƒ¼ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³", artist:"èŠ±æ¾¤é¦™èœ"},
  {title:"MY ALL", artist:"æµœå´ã‚ã‚†ã¿"},
  {title:"1999", artist:"ç¾Šæ–‡å­¦"},
  {title:"å£°", artist:"ç¾Šæ–‡å­¦"},
  {title:"ãƒãƒŠãƒŸã‚ºã‚­", artist:"ä¸€é’çªˆ"},
  {title:"å¤©å›½", artist:"ãƒ•ã‚¸ã‚¿ã‚«ã‚³"},
  {title:"ã‹ãªã—ããªã„ã‚ˆ", artist:"ãƒ•ã‚¸ã‚¿ã‚«ã‚³"},
  {title:"å¤œæ˜ã‘ã¨è›", artist:"ãƒœã‚«ãƒ­"},
  {title:"ã‹ã‚‰ãã‚Šãƒ”ã‚¨ãƒ­", artist:"ãƒœã‚«ãƒ­"},
  {title:"æ‹æ„›è£åˆ¤", artist:"ãƒœã‚«ãƒ­"},
  {title:"å¤æ‹èŠ±ç«", artist:"ãƒœã‚«ãƒ­"},
  {title:"å¦„æƒ³æ„Ÿå‚·ä»£å„Ÿé€£ç›Ÿ", artist:"ãƒœã‚«ãƒ­"},
  {title:"ãƒ´ã‚¡ãƒ³ãƒ‘ã‚¤ã‚¢", artist:"ãƒœã‚«ãƒ­"},
  {title:"KING", artist:"ãƒœã‚«ãƒ­"},
  {title:"ãƒ•ã‚©ãƒ‹ã‚¤", artist:"ãƒœã‚«ãƒ­"},
  {title:"æ‹äººã”ã£ã“", artist:"ãƒã‚«ãƒ­ãƒ‹ãˆã‚“ã´ã¤", isSpecial:true},
  {title:"ãƒ–ãƒ«ãƒ¼ãƒ™ãƒªãƒ¼ãƒŠã‚¤ãƒ„", artist:"ãƒã‚«ãƒ­ãƒ‹ãˆã‚“ã´ã¤", isSpecial:true},
  {title:"ãƒŸã‚¹ã‚¿ãƒ¼ãƒ–ãƒ«ãƒ¼ã‚¹ã‚«ã‚¤", artist:"ãƒã‚«ãƒ­ãƒ‹ãˆã‚“ã´ã¤"},
  {title:"ãƒ©ã‚¤ãƒ©ãƒƒã‚¯", artist:"ç¾æ³¢"},
  {title:"ã‚«ãƒ¯ã‚­ãƒ²ã‚¢ãƒ¡ã‚¯", artist:"ç¾æ³¢"},
  {title:"main actor", artist:"ç¾æ³¢"},
  {title:"ã‚¹ãƒã‚¤ãƒ«", artist:"æ£®ä¸ƒèœ"},
  {title:"æ˜Ÿæœˆå¤œ", artist:"ç”±è–«"},
  {title:"ã‹ãã‚Œã‚“ã¼", artist:"å„ªé‡Œ"},
  {title:"ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ©ãƒ¯ãƒ¼", artist:"å„ªé‡Œ"},
  {title:"ã‚·ãƒ£ãƒƒã‚¿ãƒ¼", artist:"å„ªé‡Œ"},
  {title:"ãƒ¡ãƒªãƒ¼ã‚´ãƒ¼ãƒ©ãƒ³ãƒ‰", artist:"å„ªé‡Œ"},
  {title:"ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹", artist:"å„ªé‡Œ"},
  {title:"ã‚¢ãƒ«ã‚¸ãƒ£ãƒ¼ãƒãƒ³", artist:"ãƒ¨ãƒ«ã‚·ã‚«"},
  {title:"å˜˜æœˆ", artist:"ãƒ¨ãƒ«ã‚·ã‚«"},
  {title:"ç›—ä½œ", artist:"ãƒ¨ãƒ«ã‚·ã‚«"},
  {title:"èŠ±ã«äº¡éœŠ", artist:"ãƒ¨ãƒ«ã‚·ã‚«"},
  {title:"è¨€ã£ã¦ã€‚", artist:"ãƒ¨ãƒ«ã‚·ã‚«"},
  {title:"ãŸã å›ã«æ™´ã‚Œ", artist:"ãƒ¨ãƒ«ã‚·ã‚«"},
  {title:"æƒ³ã„äºº", artist:"ç·‘é»„è‰²ç¤¾ä¼š", isSpecial:true},
  {title:"shout baby", artist:"ç·‘é»„è‰²ç¤¾ä¼š"},
  {title:"èŠ±ã«ãªã£ã¦", artist:"ç·‘é»„è‰²ç¤¾ä¼š"},
  {title:"ãƒªãƒƒã‚±ãƒ³ãƒãƒƒã‚«ãƒ¼", artist:"ãƒªãƒ¼ã‚¬ãƒ«ãƒªãƒªãƒ¼"},
  {title:"å¥½ãã§ã‚ˆã‹ã£ãŸã€‚", artist:"ãƒªãƒ¼ã‚¬ãƒ«ãƒªãƒªãƒ¼"},
  {title:"æµ®æ°—ã•ã‚ŒãŸã‘ã©ã¾ã å¥½ãã£ã¦æ›²ã€‚", artist:"ã‚Šã‚Šã‚"},
  {title:"ç§ã˜ã‚ƒãªã‹ã£ãŸã‚“ã ã­ã€‚", artist:"ã‚Šã‚Šã‚"},
  {title:"ç©´ç©ºãã®ç©º", artist:"adieu"},
  {title:"ãƒŠãƒ©ã‚¿ãƒ¼ã‚¸ãƒ¥", artist:"adieu"},
  {title:"ã‚ˆã‚‹ã®ã‚ã¨", artist:"adieu"},
  {title:"é¢¨ã®ã‚†ããˆ", artist:"Ado"},
  {title:"ã‚®ãƒ©ã‚®ãƒ©", artist:"Ado"},
  {title:"è¸Š", artist:"Ado"},
  {title:"ãˆã‚Šã‚ã—", artist:"aiko"},
  {title:"ã‚«ãƒ–ãƒˆãƒ ã‚·", artist:"aiko"},
  {title:"ãƒœãƒ¼ã‚¤ãƒ•ãƒ¬ãƒ³ãƒ‰", artist:"aiko"},
  {title:"èŠ±ç«", artist:"aiko"},
  {title:"ã‚‚ã£ã¨", artist:"aiko"},
  {title:"ã‚³ã‚¤ãƒ¯ã‚ºãƒ©ã‚¤", artist:"Aimer"},
  {title:"è¶è¶çµã³", artist:"Aimer"},
  {title:"ã‚«ã‚¿ã‚ªãƒ¢ã‚¤", artist:"Aimer"},
  {title:"ã‚ãªãŸã«å‡ºä¼šã‚ãªã‘ã‚Œã°", artist:"Aimer"},
  {title:"ä¼šã„ãŸã‹ã£ãŸ", artist:"AKB48"},
  {title:"æ¶™ã‚µãƒ—ãƒ©ã‚¤ã‚º", artist:"AKB48"},
  {title:"ãƒ˜ãƒ“ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³", artist:"AKB48"},
  {title:"æ‹ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒ³ã‚¯ãƒƒã‚­ãƒ¼", artist:"AKB48"},
  {title:"365æ—¥ã®ç´™é£›è¡Œæ©Ÿ", artist:"AKB48"},
  {title:"ç¬ã", artist:"backnumber"},
  {title:"HAPPYBIRTHDAY", artist:"backnumber"},
  {title:"æ°´å¹³ç·š", artist:"backnumber"},
  {title:"é«˜å¶ºã®èŠ±å­ã•ã‚“", artist:"backnumber"},
  {title:"å³¶äººã¬å®", artist:"BEGIN"},
  {title:"ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©", artist:"BiSH", isSpecial:true},
  {title:"ãƒ—ãƒ­ãƒŸã‚¹ã‚¶ã‚¹ã‚¿ãƒ¼", artist:"BiSH"},
  {title:"beautifulã•", artist:"BiSH"},
  {title:"My landscape", artist:"BiSH"},
  {title:"çŒ«", artist:"DISH//"},
  {title:"366æ—¥", artist:"HY"},
  {title:"NAO", artist:"HY"},
  {title:"ã‚«ã‚·ã‚¹ã‚ªãƒ¬ãƒ³ã‚¸", artist:"Laughing hick"},
  {title:"ç‚", artist:"LiSA"},
  {title:"ãƒ¨ãƒ¯ãƒãƒã‚­", artist:"MAISONdes"},
  {title:"ã•ã‚ˆãªã‚‰æœ€æ„›ã®äºº", artist:"mihoro"},
  {title:"us", artist:"milet"},
  {title:"inside you", artist:"milet"},
  {title:"ã‚ãªãŸãŒã“ã“ã«ã„ã¦", artist:"miwa"},
  {title:"ãƒ’ã‚«ãƒªãƒ˜", artist:"miwa", isSpecial:true},
  {title:"ãƒªãƒ–ãƒ¼ãƒˆ", artist:"miwa"},
  {title:"Don't Cry anymore", artist:"miwa"},
  {title:"ã‚ªãƒˆã‚·ãƒ¢ãƒ", artist:"miwa"},
  {title:"æ˜æ—¥ã‚‚", artist:"MUSH&Co."},
  {title:"ã¡ã£ã½ã‘ãªæ„›ã®ã†ãŸ", artist:"MUSH&Co."},
  {title:"æ‹äººãŒã§ããŸã‚“ã ", artist:"My Hair is Bad"},
  {title:"Hello Again", artist:"My Little Lover"},
  {title:"ILOVEâ€¦", artist:"officialé«­ç”·dism"},
  {title:"ã‚¤ã‚¨ã‚¹ã‚¿ãƒ‡ã‚¤", artist:"officialé«­ç”·dism"},
  {title:"Pretender", artist:"officialé«­ç”·dism"},
  {title:"ãƒãƒ¼ãƒ€ã‚¦ãƒˆ", artist:"officialé«­ç”·dism"},
  {title:"Wherever you are", artist:"ONEOKROCK"},
  {title:"æ¬²æœ›ã«è² ã‘ãŸå°‘å¹´å›£", artist:"ONEOKROCK"},
  {title:"ç”Ÿæ´»é©å‘½", artist:"PEDRO"},
  {title:"æ„›ã®ã—ã‚‹ã—", artist:"PUFFY"},
  {title:"ãã£ã‘ãªã„", artist:"RADWIMPS"},
  {title:"ãªã‚“ã§ã‚‚ãªã„ã‚„", artist:"RADWIMPS", isSpecial:true},
  {title:"ã™ãšã‚", artist:"RADWIMPS"},
  {title:"ã‚°ãƒ©ãƒ³ãƒ‰ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—", artist:"RADWIMPS"},
  {title:"å¤§ä¸ˆå¤«", artist:"RADWIMPS"},
  {title:"æ„›ã«ã§ãã‚‹ã“ã¨ã¯ã¾ã ã‚ã‚‹ã‹ã„", artist:"RADWIMPS"},
  {title:"memeshe", artist:"RADWIMPS"},
  {title:"ANIMA", artist:"ReoNa"},
  {title:"æ˜¥é¢¨", artist:"Rihwa"},
  {title:"ã„ã¤ã‹", artist:"SaucyDog"},
  {title:"çµ", artist:"SaucyDog"},
  {title:"ã‚·ãƒ³ãƒ‡ãƒ¬ãƒ©ãƒœãƒ¼ã‚¤", artist:"SaucyDog"},
  {title:"çœ ã‚Šå§«", artist:"sekai no owari"},
  {title:"æ„›ã‚’ã“ã‚ã¦èŠ±æŸã‚’", artist:"Superfly"},
  {title:"å›ã®çŸ¥ã‚‰ãªã„ç‰©èª", artist:"supercell"},
  {title:"æ™©é¤æ­Œ", artist:"tuki."},
  {title:"ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°", artist:"Uru"},
  {title:"ãã‚Œã‚’æ„›ã¨å‘¼ã¶ãªã‚‰", artist:"Uru"},
  {title:"LoveSong", artist:"Uru"},
  {title:"æ€ªç£ã®èŠ±å”„", artist:"Vaundy"},
  {title:"ã—ã‚ã‚ã‚ã›", artist:"Vaundy"},
  {title:"è¸Šã‚Šå­", artist:"Vaundy"},
  {title:"åˆ¥ã®äººã®å½¼å¥³ã«ãªã£ãŸã‚ˆ", artist:"wacci"},
  {title:"å¤œã«é§†ã‘ã‚‹", artist:"YOASOBI"},
  {title:"ç¾¤é’", artist:"YOASOBI"},
  {title:"ã‚¢ãƒ³ã‚³ãƒ¼ãƒ«", artist:"YOASOBI"},
  {title:"Summersong", artist:"YUI"},
  {title:"HELLO", artist:"YUI"},
  {title:"Namidairo", artist:"YUI"},
  {title:"YOU", artist:"YUI"},
  {title:"goodbyedays", artist:"YUI"}
];

const modal = document.getElementById('amida-modal');
const canvas = document.getElementById('amida-stage');
const ctx = canvas.getContext('2d');
const resultText = document.getElementById('result-text');
const actionBtns = document.getElementById('action-btns');
const toast = document.getElementById('toast');

function showToast() {
  toast.className = "show";
  setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 2000);
}

function buildPickupList() {
    const list = document.getElementById('pickupList');
    list.innerHTML = "";
    const special = songs.filter(s => s.isSpecial);
    special.forEach(s => {
        list.innerHTML += `
          <div class="pickup-card" onclick="copyDirect('${s.title} / ${s.artist}')">
            <div><strong>${s.title}</strong><small>${s.artist}</small></div>
            <span class="copy-icon">ğŸ“‹</span>
          </div>`;
    });
}

function kanaToHira(str) {
    if(!str) return "";
    return str.replace(/[\u30a1-\u30f6]/g, function(match) {
        var chr = match.charCodeAt(0) - 0x60;
        return String.fromCharCode(chr);
    });
}

function filterList() {
  const rawQ = document.getElementById("songSearch").value.toLowerCase();
  const q = kanaToHira(rawQ);
  const filtered = songs.filter(s => {
    const title = kanaToHira(s.title.toLowerCase());
    const artist = kanaToHira(s.artist.toLowerCase());
    return title.includes(q) || artist.includes(q);
  });
  document.getElementById("songCount").innerText = songs.length;
  const t = document.getElementById("songTable");
  t.innerHTML = "<tr><th>æ›²å / æ­Œæ‰‹</th><th>ã‚³ãƒ”ãƒ¼</th></tr>";
  filtered.forEach(s => {
    t.innerHTML += `<tr><td><strong>${s.title}</strong><br><small style="color:#666;">${s.artist}</small></td>
    <td><button class="btn btn-copy" onclick="copyDirect('${s.title} / ${s.artist}')">ğŸ“‹</button></td></tr>`;
  });
}

function openAmida() { modal.style.display = 'flex'; startAmida(); }
function closeAmida() { modal.style.display = 'none'; }
function startAmida() {
  actionBtns.style.display = "none";
  resultText.innerText = "ç”Ÿæˆä¸­...";
  const count = 10;
  const selectedSongs = [...songs].sort(() => 0.5 - Math.random()).slice(0, count);
  amidaLines = [];
  for (let i = 0; i < count - 1; i++) {
    for (let j = 0; j < 4; j++) { amidaLines.push({ from: i, y: 50 + Math.random() * 280 }); }
  }
  animate(selectedSongs);
}

function animate(targetSongs) {
  const count = targetSongs.length;
  const spacing = canvas.width / (count + 1);
  const startY = 30, endY = 350;
  let traceY = startY, traceCol = Math.floor(Math.random() * count), visitedLines = new Set();
  function frame() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.strokeStyle = '#ddd';
    for (let i = 0; i < count; i++) {
      const x = spacing * (i + 1);
      ctx.beginPath(); ctx.moveTo(x, startY); ctx.lineTo(x, endY); ctx.stroke();
      ctx.fillStyle = "#999"; ctx.font = "10px sans-serif";
      ctx.fillText(targetSongs[i].title.substring(0,4), x - 15, endY + 20);
    }
    amidaLines.forEach(l => {
      ctx.beginPath(); ctx.moveTo(spacing*(l.from+1), l.y); ctx.lineTo(spacing*(l.from+2), l.y); ctx.stroke();
    });
    ctx.fillStyle = '#e91e63'; ctx.beginPath(); ctx.arc(spacing * (traceCol + 1), traceY, 8, 0, Math.PI * 2); ctx.fill();
    if (traceY < endY) {
      let hit = amidaLines.find(l => Math.abs(l.y - traceY) < 2 && (l.from === traceCol || l.from === traceCol - 1) && !visitedLines.has(l));
      if (hit) { visitedLines.add(hit); traceCol = (hit.from === traceCol) ? traceCol + 1 : traceCol - 1; }
      traceY += 5; requestAnimationFrame(frame);
    } else {
      let currentResultStr = `${targetSongs[traceCol].title} / ${targetSongs[traceCol].artist}`;
      window.lastAmidaResult = currentResultStr;
      resultText.innerHTML = `âœ¨ çµæœï¼š${currentResultStr} âœ¨`;
      actionBtns.style.display = "flex";
    }
  }
  frame();
}

// --- å¤‰æ›´ç‚¹ï¼šalertã‚’å»ƒæ­¢ã—ã€è‡ªä½œã®showToast()ã‚’å‘¼ã³å‡ºã™ ---
function copyResult() {
  if(window.lastAmidaResult) {
    navigator.clipboard.writeText(window.lastAmidaResult).then(() => {
      showToast();
    });
  }
}
function copyDirect(text) {
  navigator.clipboard.writeText(text).then(() => {
    showToast();
  });
}

buildPickupList();
filterList();
</script>
</body>
</html>
